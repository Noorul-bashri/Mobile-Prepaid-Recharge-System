<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Login Page</title>
  <!-- Bootstrap CSS & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" 
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" 
          integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="/css/main.min.css">
  <style>
    .content-container {
      max-width: 1140px;
      margin: 0 auto;
      padding: 0 1.5rem;
      width: 100%;
    }
    /* Top Header Banner with overlay */
    header.banner {
      position: relative;
      background: url('../Images/backgrounf.jpeg') no-repeat center center;
      background-size: cover;
      height: 250px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    header.banner::before {
      content: "";
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1;
    }
    header.banner .banner-content {
      position: relative;
      z-index: 2;
    }
    header.banner .banner-content h1 {
      font-size: 3rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
      text-transform: uppercase;
      color: white;
    }
    header.banner .banner-content p {
      font-size: 1.25rem;
      margin-bottom: 1rem;
      color: white;
    }
    /* Login Container with Background Image */
    .login-container {
      background: url('../Images/login.jpg') no-repeat center center;
      background-size: cover;
      padding: 50px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
    }
  </style>
</head>
<body>
  <!-- Top Header Banner -->
  <header class="banner">
    <div class="content-container banner-content">
      <h1>Mobi-Comm Service Pvt Ltd</h1>
      <p>Empowering the future of digital communication with seamless connectivity and innovative solutions.</p>
    </div>
  </header>

  <!-- Login Section -->
  <div class="container login-container m-5">
    <div class="row align-items-center">
      <!-- Login Card Column -->
      <div class="col-12 col-md-6 mx-auto">
        <div class="card bg-white bg-opacity-75 m-5">
          <div class="card-title text-center pt-3">
            <h2 style="font-family: serif;">Login to Mobi-Comm</h2>
          </div>
          <hr>
          <div class="card-body">
            <h4 class="card-text" style="font-family: serif;">Mobile Number</h4><br>
            <form id="loginForm">
              <div class="mb-3">
                <input type="tel" id="mobile_num" class="form-control" placeholder="Enter Mobile Number" required>
                <small class="text-danger" id="mobileError"></small>
              </div>
              <!-- Get OTP Button -->
              <button type="button" id="getOtpButton" 
                      class="btn btn-secondary text-black fw-bold text-decoration-none w-100" 
                      style="font-family: serif;">
                <b>Get OTP</b>
              </button>
              <!-- OTP Section -->
              <div id="otpSection" style="display: none;">
                <br>
                <div class="alert alert-info" id="otpDisplay"></div>
                <div class="mb-3">
                  <input type="text" id="otpInput" class="form-control" placeholder="Enter OTP">
                  <small class="text-danger" id="otpError"></small>
                </div>
                <button type="button" id="verifyOtpButton" 
                        class="btn btn-secondary text-black fw-bold text-decoration-none w-100" 
                        style="font-family: serif;">
                  <b>Verify OTP</b>
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <div class="footer-top">
      <div class="content-container">
        <div class="row">
          <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
            <h5>Mobi-Comm Service Pvt Ltd</h5>
            <p>Connecting People, Anytime, Anywhere.</p>
            <div class="social-icons">
              <a href="#" class="social-icon"><i class="bi bi-facebook"></i></a>
              <a href="#" class="social-icon"><i class="bi bi-twitter"></i></a>
              <a href="#" class="social-icon"><i class="bi bi-instagram"></i></a>
              <a href="#" class="social-icon"><i class="bi bi-linkedin"></i></a>
            </div>
          </div>
          <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
            <h5>Quick Links</h5>
            <ul>
              <li><a href="About.html">About Us</a></li>
              <li><a href="#">Privacy Policy</a></li>
              <li><a href="#">Terms &amp; Conditions</a></li>
              <li><a href="#">Refund Policy</a></li>
            </ul>
          </div>
          <div class="col-md-4" data-aos="fade-up" data-aos-delay="300">
            <h5>Connect With Us</h5>
            <p>Follow us on social media for the latest updates.</p>
          </div>
        </div>
        <!-- Newsletter Signup Section -->
        <div class="newsletter-section" data-aos="fade-up" data-aos-delay="400">
          <h5>Subscribe to Our Newsletter</h5>
          <p>Get the latest updates and exclusive offers delivered straight to your inbox.</p>
          <form action="#" class="newsletter-form" onsubmit="handleSubscription(event)">
            <input type="email" placeholder="Enter your email" required>
            <button type="submit" class="btn">Subscribe</button>
          </form>
          <div id="subscription-message" class="subscription-message" style="display:none;">
            Subscribed! You will receive email notifications with our latest news and updates.
          </div>
          <div class="newsletter-extra mt-2">
            <p>
              We value your privacy and promise not to spam your inbox. As a subscriber, you'll get exclusive insights, early access to offers, and behind-the-scenes updates.
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <div class="content-container">
        <p class="mb-0">&copy; 2025 Mobi-Comm Service Pvt Ltd. All Rights Reserved.</p>
      </div>
    </div>
  </footer>

  <!-- JavaScript for OTP Generation & Verification -->
  <script>
    let generatedOtp = "";
    
    document.getElementById('getOtpButton').addEventListener('click', async function (event) {
      event.preventDefault();
      const mobileInput = document.getElementById('mobile_num');
      const mobileError = document.getElementById('mobileError');
      const mobileNumber = mobileInput.value.trim();
      const mobileRegex = /^\d{10}$/;
      
      // Validate mobile number
      if (mobileNumber === '') {
        mobileError.textContent = 'Please enter a mobile number.';
        mobileInput.classList.add('is-invalid');
        return;
      } 
      if (!mobileRegex.test(mobileNumber)) {
        mobileError.textContent = 'Please enter a valid 10-digit mobile number.';
        mobileInput.classList.add('is-invalid');
        return;
      }
      mobileError.textContent = '';
      mobileInput.classList.remove('is-invalid');
      mobileInput.classList.add('is-valid');
      
      // Check registration using JSON data
      try {
        const response = await fetch("/JSON/userNumber.json");
        const data = await response.json();
        const validNumbers = data.users.map(user => user.phone);
        
        if (validNumbers.includes(mobileNumber)) {
          // Generate a 6-digit OTP
          generatedOtp = Math.floor(100000 + Math.random() * 900000).toString();
          // For simulation, display the OTP in an alert box (or show in OTP section)
          document.getElementById('otpDisplay').textContent = "Your OTP is: " + generatedOtp;
          document.getElementById('otpSection').style.display = "block";
          document.getElementById('getOtpButton').style.display = "none";
        } else {
          mobileError.textContent = "This number is not registered with Mobi-Comm.";
          mobileInput.classList.add("is-invalid");
        }
      } catch (error) {
        mobileError.textContent = "Error validating number. Please try again later.";
        console.error("Error fetching JSON data:", error);
      }
    });
    
    document.getElementById('verifyOtpButton').addEventListener('click', function (event) {
      event.preventDefault();
      const otpInput = document.getElementById('otpInput');
      const otpError = document.getElementById('otpError');
      const enteredOtp = otpInput.value.trim();
      
      if (enteredOtp === "") {
        otpError.textContent = "Please enter the OTP.";
        otpInput.classList.add("is-invalid");
        return;
      }
      if (enteredOtp !== generatedOtp) {
        otpError.textContent = "Incorrect OTP. Please try again.";
        otpInput.classList.add("is-invalid");
        return;
      }
      
      // OTP verified: Save mobile number to sessionStorage and redirect
      sessionStorage.setItem('userNumber', document.getElementById('mobile_num').value.trim());
      window.location.href = 'LoginHomePage.html';
    });
  </script>
</body>
</html>
